#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             24000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          2800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

BATTERY_PROFILE_STRUC battery_profile_t0[] = // T0 -10C
{
{0, 4316},
{1, 4294},
{2, 4277},
{3, 4261},
{4, 4224},
{5, 4200},
{6, 4191},
{7, 4182},
{8, 4166},
{9, 4151},
{10, 4144},
{11, 4138},
{12, 4124},
{13, 4111},
{14, 4104},
{15, 4098},
{16, 4085},
{17, 4073},
{18, 4067},
{19, 4061},
{20, 4048},
{21, 4037},
{22, 4031},
{23, 4025},
{24, 4014},
{25, 4002},
{26, 3996},
{27, 3991},
{28, 3979},
{29, 3973},
{30, 3967},
{31, 3956},
{32, 3943},
{33, 3937},
{34, 3931},
{35, 3920},
{36, 3909},
{37, 3903},
{38, 3898},
{39, 3888},
{40, 3879},
{41, 3875},
{42, 3871},
{43, 3863},
{44, 3855},
{45, 3852},
{46, 3849},
{47, 3842},
{48, 3837},
{49, 3833},
{50, 3830},
{51, 3825},
{52, 3820},
{53, 3817},
{54, 3815},
{55, 3810},
{56, 3806},
{57, 3803},
{58, 3801},
{59, 3797},
{60, 3793},
{61, 3791},
{62, 3790},
{63, 3786},
{64, 3783},
{65, 3781},
{66, 3780},
{67, 3777},
{68, 3774},
{69, 3772},
{70, 3771},
{71, 3768},
{72, 3765},
{73, 3763},
{74, 3762},
{75, 3758},
{76, 3753},
{77, 3750},
{78, 3747},
{79, 3741},
{80, 3734},
{81, 3730},
{82, 3727},
{83, 3718},
{84, 3709},
{85, 3704},
{86, 3700},
{87, 3693},
{88, 3690},
{89, 3687},
{90, 3682},
{91, 3676},
{92, 3672},
{93, 3668},
{94, 3655},
{95, 3626},
{96, 3591},
{97, 3561},
{98, 3482},
{99, 3458},
{100, 3425}
};

BATTERY_PROFILE_STRUC battery_profile_t1[] = // T1 0C
{
{0, 4304},
{1, 4266},
{2, 4255},
{3, 4244},
{4, 4226},
{5, 4210},
{6, 4202},
{7, 4195},
{8, 4181},
{9, 4167},
{10, 4160},
{11, 4154},
{12, 4140},
{13, 4127},
{14, 4120},
{15, 4114},
{16, 4102},
{17, 4089},
{18, 4077},
{19, 4071},
{20, 4065},
{21, 4054},
{22, 4043},
{23, 4037},
{24, 4031},
{25, 4021},
{26, 4010},
{27, 4004},
{28, 3999},
{29, 3989},
{30, 3978},
{31, 3973},
{32, 3968},
{33, 3957},
{34, 3945},
{35, 3939},
{36, 3933},
{37, 3922},
{38, 3909},
{39, 3903},
{40, 3898},
{41, 3888},
{42, 3878},
{43, 3873},
{44, 3869},
{45, 3861},
{46, 3854},
{47, 3847},
{48, 3844},
{49, 3841},
{50, 3835},
{51, 3830},
{52, 3827},
{53, 3825},
{54, 3820},
{55, 3815},
{56, 3813},
{57, 3811},
{58, 3807},
{59, 3803},
{60, 3801},
{61, 3799},
{62, 3795},
{63, 3792},
{64, 3790},
{65, 3789},
{66, 3786},
{67, 3783},
{68, 3781},
{69, 3780},
{70, 3778},
{71, 3775},
{72, 3773},
{73, 3772},
{74, 3768},
{75, 3764},
{76, 3761},
{77, 3759},
{78, 3755},
{79, 3749},
{80, 3743},
{81, 3739},
{82, 3735},
{83, 3727},
{84, 3719},
{85, 3714},
{86, 3709},
{87, 3698},
{88, 3691},
{89, 3689},
{90, 3687},
{91, 3682},
{92, 3677},
{93, 3674},
{94, 3671},
{95, 3658},
{96, 3622},
{97, 3592},
{98, 3563},
{99, 3484},
{100, 3416}
};

BATTERY_PROFILE_STRUC battery_profile_t2[] = // T2 25C
{
{0, 4331},
{1, 4312},
{2, 4296},
{3, 4288},
{4, 4281},
{5, 4266},
{6, 4252},
{7, 4238},
{8, 4231},
{9, 4224},
{10, 4210},
{11, 4197},
{12, 4184},
{13, 4177},
{14, 4171},
{15, 4158},
{16, 4145},
{17, 4132},
{18, 4125},
{19, 4119},
{20, 4107},
{21, 4095},
{22, 4083},
{23, 4077},
{24, 4071},
{25, 4060},
{26, 4049},
{27, 4038},
{28, 4032},
{29, 4027},
{30, 4017},
{31, 4007},
{32, 3997},
{33, 3987},
{34, 3982},
{35, 3977},
{36, 3967},
{37, 3957},
{38, 3947},
{39, 3941},
{40, 3936},
{41, 3924},
{42, 3912},
{43, 3900},
{44, 3894},
{45, 3889},
{46, 3879},
{47, 3870},
{48, 3862},
{49, 3858},
{50, 3854},
{51, 3848},
{52, 3842},
{53, 3836},
{54, 3831},
{55, 3828},
{56, 3826},
{57, 3821},
{58, 3816},
{59, 3812},
{60, 3810},
{61, 3808},
{62, 3804},
{63, 3801},
{64, 3797},
{65, 3795},
{66, 3793},
{67, 3790},
{68, 3786},
{69, 3783},
{70, 3781},
{71, 3779},
{72, 3775},
{73, 3770},
{74, 3765},
{75, 3762},
{76, 3759},
{77, 3754},
{78, 3748},
{79, 3743},
{80, 3741},
{81, 3739},
{82, 3733},
{83, 3726},
{84, 3717},
{85, 3710},
{86, 3705},
{87, 3701},
{88, 3689},
{89, 3685},
{90, 3682},
{91, 3680},
{92, 3679},
{93, 3675},
{94, 3670},
{95, 3656},
{96, 3636},
{97, 3617},
{98, 3559},
{99, 3482},
{100, 3371}
};

BATTERY_PROFILE_STRUC battery_profile_t3[] = // T3 50C
{
{0, 4336},
{1, 4318},
{2, 4302},
{3, 4294},
{4, 4287},
{5, 4274},
{6, 4259},
{7, 4245},
{8, 4238},
{9, 4231},
{10, 4217},
{11, 4204},
{12, 4191},
{13, 4184},
{14, 4177},
{15, 4164},
{16, 4151},
{17, 4138},
{18, 4125},
{19, 4119},
{20, 4113},
{21, 4101},
{22, 4088},
{23, 4077},
{24, 4071},
{25, 4065},
{26, 4053},
{27, 4042},
{28, 4031},
{29, 4026},
{30, 4021},
{31, 4010},
{32, 4000},
{33, 3990},
{34, 3985},
{35, 3981},
{36, 3971},
{37, 3962},
{38, 3953},
{39, 3943},
{40, 3938},
{41, 3933},
{42, 3922},
{43, 3910},
{44, 3897},
{45, 3890},
{46, 3884},
{47, 3874},
{48, 3865},
{49, 3858},
{50, 3854},
{51, 3851},
{52, 3844},
{53, 3839},
{54, 3833},
{55, 3827},
{56, 3824},
{57, 3822},
{58, 3817},
{59, 3813},
{60, 3809},
{61, 3806},
{62, 3804},
{63, 3800},
{64, 3796},
{65, 3793},
{66, 3791},
{67, 3789},
{68, 3785},
{69, 3782},
{70, 3777},
{71, 3770},
{72, 3765},
{73, 3760},
{74, 3753},
{75, 3747},
{76, 3742},
{77, 3739},
{78, 3736},
{79, 3731},
{80, 3726},
{81, 3721},
{82, 3718},
{83, 3715},
{84, 3707},
{85, 3698},
{86, 3691},
{87, 3685},
{88, 3680},
{89, 3672},
{90, 3669},
{91, 3666},
{92, 3663},
{93, 3661},
{94, 3659},
{95, 3650},
{96, 3622},
{97, 3572},
{98, 3539},
{99, 3507},
{100, 3419}
};       

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{              
    {355, 4316},
    {355, 4294},
    {353, 4261},
    {383, 4224},
    {418, 4200},
    {433, 4182},
    {443, 4166},
    {450, 4151},
    {460, 4138},
    {465, 4124},
    {473, 4111},
    {478, 4098},
    {483, 4085},
    {488, 4073},
    {493, 4061},
    {493, 4048},
    {498, 4037},
    {498, 4025},
    {503, 4014},
    {503, 4002},
    {503, 3991},
    {503, 3979},
    {500, 3967},
    {500, 3956},
    {495, 3943},
    {493, 3931},
    {493, 3920},
    {490, 3909},
    {490, 3898},
    {490, 3888},
    {493, 3879},
    {495, 3871},
    {500, 3863},
    {503, 3855},
    {510, 3849},
    {513, 3842},
    {523, 3837},
    {525, 3830},
    {530, 3825},
    {535, 3820},
    {543, 3815},
    {545, 3810},
    {553, 3806},
    {555, 3801},
    {560, 3797},
    {563, 3793},
    {570, 3790},
    {573, 3786},
    {575, 3783},
    {580, 3780},
    {583, 3777},
    {585, 3774},
    {588, 3771},
    {588, 3768},
    {590, 3765},
    {595, 3762},
    {595, 3758},
    {595, 3753},
    {595, 3747},
    {598, 3741},
    {600, 3734},
    {600, 3727},
    {600, 3718},
    {603, 3709},
    {605, 3700},
    {623, 3693},
    {655, 3687},
    {700, 3682},
    {753, 3676},
    {813, 3668},
    {895, 3655},
    {1018, 3626},
    {980, 3591},
    {903, 3561},
    {840, 3536},
    {788, 3515},
    {745, 3497},
    {705, 3482},
    {675, 3469},
    {648, 3458},
    {630, 3449},
    {605, 3441},
    {590, 3435},
    {575, 3429},
    {568, 3425},
    {565, 3425}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{              
    {233, 4304},
    {233, 4266},
    {253, 4244},
    {260, 4226},
    {265, 4210},
    {270, 4195},
    {275, 4181},
    {280, 4167},
    {285, 4154},
    {290, 4140},
    {293, 4127},
    {295, 4114},
    {303, 4102},
    {303, 4089},
    {305, 4077},
    {308, 4065},
    {313, 4054},
    {315, 4043},
    {315, 4031},
    {320, 4021},
    {320, 4010},
    {320, 3999},
    {323, 3989},
    {320, 3978},
    {323, 3968},
    {320, 3957},
    {315, 3945},
    {308, 3933},
    {305, 3922},
    {298, 3909},
    {293, 3898},
    {290, 3888},
    {288, 3878},
    {285, 3869},
    {285, 3861},
    {288, 3854},
    {288, 3847},
    {293, 3841},
    {295, 3835},
    {298, 3830},
    {303, 3825},
    {305, 3820},
    {310, 3815},
    {313, 3811},
    {315, 3807},
    {318, 3803},
    {320, 3799},
    {323, 3795},
    {325, 3792},
    {328, 3789},
    {330, 3786},
    {330, 3783},
    {330, 3780},
    {335, 3778},
    {333, 3775},
    {333, 3772},
    {330, 3768},
    {330, 3764},
    {330, 3759},
    {333, 3755},
    {333, 3749},
    {335, 3743},
    {333, 3735},
    {333, 3727},
    {333, 3719},
    {328, 3709},
    {318, 3698},
    {323, 3691},
    {338, 3687},
    {358, 3682},
    {378, 3677},
    {403, 3671},
    {425, 3658},
    {430, 3622},
    {465, 3563},
    {550, 3484},
    {540, 3416},
    {445, 3377},
    {385, 3353},
    {350, 3339},
    {323, 3329},
    {305, 3321},
    {295, 3317},
    {285, 3313},
    {278, 3310},
    {278, 3310}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{              
    {133, 4331},
    {133, 4312},
    {135, 4296},
    {135, 4281},
    {135, 4266},
    {135, 4252},
    {138, 4238},
    {138, 4224},
    {140, 4210},
    {143, 4197},
    {145, 4184},
    {148, 4171},
    {148, 4158},
    {150, 4145},
    {150, 4132},
    {153, 4119},
    {155, 4107},
    {158, 4095},
    {160, 4083},
    {160, 4071},
    {163, 4060},
    {165, 4049},
    {168, 4038},
    {170, 4027},
    {173, 4017},
    {175, 4007},
    {175, 3997},
    {178, 3987},
    {178, 3977},
    {178, 3967},
    {178, 3957},
    {178, 3947},
    {175, 3936},
    {168, 3924},
    {163, 3912},
    {155, 3900},
    {150, 3889},
    {145, 3879},
    {143, 3870},
    {140, 3862},
    {138, 3854},
    {140, 3848},
    {140, 3842},
    {140, 3836},
    {143, 3831},
    {145, 3826},
    {145, 3821},
    {145, 3816},
    {145, 3812},
    {148, 3808},
    {150, 3804},
    {153, 3801},
    {153, 3797},
    {153, 3793},
    {153, 3790},
    {153, 3786},
    {153, 3783},
    {153, 3779},
    {150, 3775},
    {148, 3770},
    {148, 3765},
    {145, 3759},
    {145, 3754},
    {143, 3748},
    {145, 3743},
    {148, 3739},
    {145, 3733},
    {145, 3726},
    {143, 3717},
    {145, 3710},
    {145, 3701},
    {138, 3689},
    {140, 3685},
    {143, 3682},
    {145, 3679},
    {150, 3675},
    {155, 3670},
    {158, 3656},
    {150, 3617},
    {153, 3559},
    {160, 3482},
    {168, 3371},
    {180, 3272},
    {150, 3259},
    {138, 3254},
    {135, 3254}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{              
    {103, 4336},
    {103, 4318},
    {105, 4302},
    {105, 4287},
    {108, 4274},
    {108, 4259},
    {108, 4245},
    {108, 4231},
    {108, 4217},
    {110, 4204},
    {113, 4191},
    {113, 4177},
    {113, 4164},
    {115, 4151},
    {115, 4138},
    {115, 4125},
    {118, 4113},
    {120, 4101},
    {118, 4088},
    {120, 4077},
    {123, 4065},
    {123, 4053},
    {123, 4042},
    {123, 4031},
    {128, 4021},
    {128, 4010},
    {130, 4000},
    {130, 3990},
    {133, 3981},
    {135, 3971},
    {138, 3962},
    {140, 3953},
    {140, 3943},
    {140, 3933},
    {138, 3922},
    {133, 3910},
    {125, 3897},
    {118, 3884},
    {115, 3874},
    {113, 3865},
    {113, 3858},
    {113, 3851},
    {110, 3844},
    {113, 3839},
    {113, 3833},
    {113, 3827},
    {113, 3822},
    {113, 3817},
    {118, 3813},
    {118, 3809},
    {115, 3804},
    {118, 3800},
    {120, 3796},
    {123, 3793},
    {123, 3789},
    {123, 3785},
    {125, 3782},
    {123, 3777},
    {118, 3770},
    {113, 3760},
    {115, 3753},
    {113, 3747},
    {115, 3742},
    {115, 3736},
    {115, 3731},
    {115, 3726},
    {115, 3721},
    {115, 3715},
    {113, 3707},
    {113, 3698},
    {115, 3691},
    {113, 3680},
    {113, 3672},
    {113, 3669},
    {113, 3666},
    {115, 3663},
    {118, 3659},
    {118, 3650},
    {115, 3622},
    {118, 3572},
    {123, 3507},
    {130, 3419},
    {148, 3289},
    {138, 3254},
    {123, 3248},
    {123, 3248}
};


// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

